<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.mm.ask">
  	<insert id="askInsert">
  		insert into ask values(
  								ask_ask_idx.nextval,
  								#{user_idx},
								#{ask_title},
								#{ask_writer},
								#{ask_tel},
								#{rsd_type},
								#{rsd_py},
								#{ask_file},
								#{ask_content},
								#{ask_pwd},
								#{ask_tos},
								sysdate,
								0
  		
  		)
  	</insert>
	<select id="askList" parameterType="Map" resultType="com.mm.ask.model.AskDTO">
			select * from 
  			(select rownum as rnum,a.* from
				(select * from ask order by ask_idx desc)a
			)b
		where rnum <![CDATA[>=]]> #{start} and rnum <![CDATA[<=]]>#{end}
	</select>
		<select id="askCnt" resultType="Integer">
  		select count(*) from ask
  	</select>
  	<select id="askSelectContent" parameterType="Integer" resultType="com.mm.ask.model.AskDTO">
  		select * from ask where ask_idx = #{ask_idx}
  	</select>
   <select id="existsFile" parameterType="String" resultType="Integer">
        SELECT COUNT(*) FROM ASK WHERE ask_file = #{fileName}
    </select>
  </mapper>
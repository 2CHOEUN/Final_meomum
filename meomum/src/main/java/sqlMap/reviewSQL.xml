<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.mm.review">
	<insert id="reviewInsert" parameterType="com.mm.review.model.ReviewDTO">
		insert into
			review
		values(
			review_idx.nextval,
			1,
			'svc_idx',
			1,
			#{writer},
			#{star},
			#{subject},
			#{content},
			sysdate,
			0,
			#{thumb}
		)
	</insert>
	
	<select id="reviewList" parameterType="Map" resultType="com.mm.review.model.ReviewDTO">
		select * from
		(select rownum as rnum, a.*from(
			select * from review order by review_idx desc
		)a )b
		where rnum<![CDATA[>=]]>#{start} and rnum<![CDATA[<=]]>#{end}
	</select>
	
	<select id="reviewTotalCnt" resultType="Integer">
		select count(*) from
			review
	</select>


	<select id="reviewContent" parameterType="Integer" resultType="com.mm.review.model.ReviewDTO">
		select * from review
		where review_idx=#{review_idx}
	</select>
</mapper>
